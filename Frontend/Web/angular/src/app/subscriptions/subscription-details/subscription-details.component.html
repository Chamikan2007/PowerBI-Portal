<section class="content">
    <div class="content-block">
        <div class="row clearfix">
            <div class="col col-12">
                <div class="card">
                    <div class="header">
                        <div class="w-100 d-flex justify-content-between">
                            <h2>Subscription Details</h2>
                            <button class="icon-button" (click)="goBack()">
                                <i class="fa-solid fa-chevron-left"></i>
                            </button>
                        </div>
                    </div>
                    <div class="body">

                        <form *ngIf="isReadOnly == false" class="validate-form" [formGroup]="subscriptionForm" (ngSubmit)="onSubmit()">
                            <div class="row mb-5">
                                <div class="col col-5 border rounded p-4">
                                    <div class="mb-3 input">
                                        <div class="row">
                                            <div class="col p-0">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Report</mat-label>
                                                    <input type="text" class="form-control" placeholder="Pick a report" aria-label="Report" matInput [formControl]="reportPicker" [matAutocomplete]="auto">
                                                    <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" (optionSelected)='setSelectedReport($event.option)'>
                                                        @for (report of filteredReports | async; track report) {
                                                        <mat-option [value]="report.path">{{report.path}}</mat-option>
                                                        }
                                                    </mat-autocomplete>
                                                    <!-- @if (subscriptionForm.get('reportPicker')?.hasError('required')) {
                                                    <mat-error>
                                                        Report is required.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col  p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Description</mat-label>
                                                    <input matInput type="text" formControlName="description" class="form-control" (change)="onDescriptionChange($event)">
                                                    <!-- @if (subscriptionForm.get('description')?.hasError('required')) {
                                                    <mat-error>
                                                        Description is required.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Owner</mat-label>
                                                    <input matInput type="text" formControlName="owner" class="form-control" [value]="this.model.report.owner">
                                                    <!-- @if (subscriptionForm.get('owner')?.hasError('required')) {
                                                    <mat-error>
                                                        Owner is required.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3 input">
                                        <h5 class="p-0">Subscription type</h5>
                                        <div class="col p-0 mb-5">
                                            <mat-radio-group class="vertical-radio-group" formControlName="subscriptionType" (change)="onSubscriptionTypeChange($event)">
                                                <mat-radio-button value="0" [checked]="true">Standard subscription</mat-radio-button>
                                                <mat-radio-button value="1" [disabled]="true">Data-driven subscription</mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                    </div>
                                    <div class="mb-3 input">
                                        <h5 class="p-0">Destination</h5>
                                        <div class="col p-0">
                                            <mat-form-field class="example-full-width" appearance="outline">
                                                <mat-select formControlName="destinationType" (selectionChange)="onDestinationChange($event)">
                                                    <mat-option *ngFor="let opt of destinationItems; index as i;" [value]="opt.key" [disabled]="i==0">{{opt.value}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div *ngIf="model.destination == 1" class="input">
                                        <h5 class="p-0">Delivery options (Email)</h5>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>To</mat-label>
                                                    <input matInput type="email" formControlName="email_to" class="form-control" (change)="onDeliveryOptionEmailToChange($event)">
                                                    <!-- @if (subscriptionForm.get('email_to')?.hasError('required, email')) {
                                                    <mat-error>
                                                        To email is required.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Cc</mat-label>
                                                    <input matInput type="email" formControlName="email_cc" class="form-control" (change)="onDeliveryOptionEmailCcChange($event)">
                                                    <!-- @if (subscriptionForm.get('email_cc')?.hasError('email')) {
                                                    <mat-error>
                                                        Cc email is invalid.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Bcc</mat-label>
                                                    <input matInput type="email" formControlName="email_bcc" class="form-control" (change)="onDeliveryOptionEmailBccChange($event)">
                                                    <!-- @if (subscriptionForm.get('email_bcc')?.hasError('email')) {
                                                    <mat-error>
                                                        Bcc email is invalid.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Reply To</mat-label>
                                                    <input matInput type="email" formControlName="email_replyto" class="form-control" (change)="onDeliveryOptionEmailReplyToChange($event)">
                                                    <!-- @if (subscriptionForm.get('email_replyto')?.hasError('email')) {
                                                    <mat-error>
                                                        Reply To email is invalid.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Subject</mat-label>
                                                    <input matInput type="text" formControlName="email_subject" class="form-control" (change)="onDeliveryOptionEmailSubjectChange($event)">
                                                    <!-- @if (subscriptionForm.get('email_subject')?.hasError('required')) {
                                                    <mat-error>
                                                        Subject is required.
                                                    </mat-error>
                                                    } -->
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="input mb-3">
                                            <div class="row">
                                                <div class="col p-0">
                                                    <mat-checkbox value="0" formControlName="includeReportCheckbox" checked (change)="onIncludeReportChange($event.checked)">Include Report</mat-checkbox>
                                                </div>
                                                <div class="col p-0">
                                                    <mat-checkbox value="1" formControlName="includeLinkCheckbox" checked (change)="onIncludeLinkChange($event.checked)">Include Link</mat-checkbox>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="input row">
                                            <div class="col-12 p-0 mb-2">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Render Format</mat-label>
                                                    <mat-select formControlName="renderFormat" (selectionChange)="onRenderFormatChange($event)">
                                                        <mat-option *ngFor="let opt of renderFormatItems;" [value]="opt.key">{{opt.value}}</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-12 p-0">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Priority</mat-label>
                                                    <mat-select formControlName="priority" (selectionChange)="onPriorityChange($event)">
                                                        <mat-option *ngFor="let opt of priorityItems;" [value]="opt.key">{{opt.value}}</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col">
                                                <mat-form-field class="example-full-width" appearance="outline">
                                                    <mat-label>Comment</mat-label>
                                                    <textarea matInput formControlName="comment" class="form-control" (change)="onCommentTextChange($event)"></textarea>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col col-auto"></div>

                                <div class="col col-6 border rounded p-4">
                                    <div class="row">
                                        <h5 class="p-0">Schedule details</h5>
                                        <div class="col p-0 mb-5">
                                            <mat-radio-group class="vertical-radio-group" formControlName="scheduleDetailType" (change)="onScheduleDetailTypeChange($event)">
                                                <mat-radio-button value="0" [disabled]="true">Shared schedule</mat-radio-button>
                                                <mat-radio-button value="1" [checked]="true">Report-specific schedule</mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                    </div>
                                    <hr class="my-4">
                                    <div *ngIf="model.scheduleDetailType == 1" class="row">
                                        <div class="col p-0 mb-5">
                                            <mat-radio-group formControlName="scheduleType" (change)="onScheduleTypeChange($event)">
                                                <mat-radio-button *ngFor="let opt of scheduleTypeItems; index as i" [value]="opt.key" [checked]="i==0" class="me-4">{{opt.value}}</mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                        <div [ngSwitch]="model.scheduleType" class="mt-4 p-0">
                                            <div *ngSwitchCase="1" class="row">
                                                <div class="col p-0">
                                                    <h5>Hourly schedule</h5>
                                                    <div class="row">
                                                        <div class="row px-0">
                                                            <div class="col-6 px-0">
                                                                <label class="mb-3">Run the schedule every:</label>
                                                                <!-- <mat-form-field class="example-full-width p-0" appearance="outline">
                                                                    <mat-label>Choose a time</mat-label>
                                                                    <input matInput [owlDateTimeTrigger]="hourly_run_time" [owlDateTime]="hourly_run_time" (dateTimeChange)="onHourlyRunScheduleEveryTimeChange($event)">
                                                                    <mat-icon matSuffix [owlDateTimeTrigger]="hourly_run_time" class="date-icon">schedule</mat-icon>
                                                                    <owl-date-time [pickerType]="'timer'" #hourly_run_time></owl-date-time>
                                                                </mat-form-field> -->
                                                                <div class="row px-0">
                                                                    <div class="col-6 col-sm-6 p-0">
                                                                        <mat-form-field class="example-full-width number-input" appearance="outline">
                                                                            <mat-label>hours</mat-label>
                                                                            <input type="number" min="0" max="23" class="form-control" matInput formControlName="hourly_hour" (change)="onHourlyRunScheduleEveryHourChange($event)">
                                                                        </mat-form-field>
                                                                    </div>
                                                                    <div class="col-6 col-sm-6 p-0">
                                                                        <mat-form-field class="example-full-width number-input" appearance="outline">
                                                                            <mat-label>minutes</mat-label>
                                                                            <input type="number" min="0" max="59" class="form-control" matInput formControlName="hourly_minute" (change)="onHourlyRunScheduleEveryMinuteChange($event)">
                                                                        </mat-form-field>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row px-0">
                                                            <div class="col-6 px-0">
                                                                <label class="mb-3">Start time</label>
                                                                <mat-form-field class="example-full-width mb-3 p-0" appearance="outline">
                                                                    <mat-label>Choose a time</mat-label>
                                                                    <input matInput [owlDateTimeTrigger]="hourly_start_time" [owlDateTime]="hourly_start_time" formControlName="hourly_start_time" (dateTimeChange)="onHourlyRunScheduleStartTimeChange($event)">
                                                                    <mat-icon matSuffix [owlDateTimeTrigger]="hourly_start_time" class="date-icon">schedule</mat-icon>
                                                                    <owl-date-time [pickerType]="'timer'" #hourly_start_time></owl-date-time>
                                                                </mat-form-field>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngSwitchCase="2" class="row">
                                                <h5 class="px-0">Daily schedule</h5>
                                                <div class="row px-0">
                                                    <div class="col px-0">
                                                        <mat-radio-group class="vertical-radio-group" formControlName="dailyScheduleType" (change)="onDailyScheduleTypeChange($event)">
                                                            <mat-radio-button value="0" [checked]="model.schedule.dailySchedule.dailyScheduleType == 0">On the following days:</mat-radio-button>
                                                            <section class="example-section d-flex" style="margin-left: 2rem; flex: 1;">
                                                                <mat-checkbox *ngFor="let opt of daysOfWeekItems;" [value]="opt.key.toString()" [checked]="true" [disabled]="model.schedule.dailySchedule.dailyScheduleType != 0"
                                                                    (change)="onDailyScheduleDayStatusChange($event.checked, opt)">
                                                                    {{opt.value}}</mat-checkbox>
                                                            </section>
                                                            <mat-radio-button value="1" [checked]="model.schedule.dailySchedule.dailyScheduleType == 1">Every weekday</mat-radio-button>
                                                            <mat-radio-button value="2" [checked]="model.schedule.dailySchedule.dailyScheduleType == 2">
                                                                <div class="row d-flex align-items-center" style="flex: 1;">
                                                                    <div class="col col-auto ms-0 ps-0">
                                                                        <label class="mt-1">Repeat after this number of days:</label>
                                                                    </div>
                                                                    <div class="col col-auto input custom-input">
                                                                        <mat-form-field class="example-full-width number-input" appearance="outline">
                                                                            <input type="number" min="0" max="6" class="form-control mt-1" matInput [disabled]="model.schedule.dailySchedule.dailyScheduleType !== 2"
                                                                                (change)="onDailyRunScheduleRepeatAfterDayCountChange($event)">
                                                                        </mat-form-field>
                                                                    </div>
                                                                </div>
                                                            </mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                </div>
                                                <div class="row px-0 mt-4">
                                                    <div class="row px-0">
                                                        <div class="col-6 px-0">
                                                            <label class="mb-3">Start time</label>
                                                            <mat-form-field class="example-full-width mb-3 p-0" appearance="outline">
                                                                <mat-label>Choose a time</mat-label>
                                                                <input matInput [owlDateTimeTrigger]="daily_start_time" [owlDateTime]="daily_start_time" formControlName="daily_start_time" (dateTimeChange)="onDailyRunScheduleStartTimeChange($event)">
                                                                <mat-icon matSuffix [owlDateTimeTrigger]="daily_start_time" class="date-icon">schedule</mat-icon>
                                                                <owl-date-time [pickerType]="'timer'" #daily_start_time></owl-date-time>
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngSwitchCase="3">
                                                <h5 class="px-0">Weekly schedule</h5>
                                                <div class="row px-0">
                                                    <label class="mb-3 px-0">Repeat after this number of days:</label>
                                                    <div class="col px-0 input">
                                                        <mat-form-field class="example-full-width number-input" appearance="outline">
                                                            <input type="number" class="form-control" matInput formControlName="weekly_repeat_In" (change)="onWeeklyRunScheduleRepeatAfterDayCountChange($event)">
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <section class="example-section px-0">
                                                    <div class="ms-0">
                                                        <mat-checkbox *ngFor="let opt of daysOfWeekItems;" [value]="opt.key.toString()" [checked]="true" (change)="onWeeklyScheduleDayStatusChange($event.checked, opt)">{{opt.value}}</mat-checkbox>
                                                        <!-- <mat-checkbox *ngFor="let opt of daysOfWeekItems;" [value]="opt.key.toString()" [checked]="true" (change)="onDailyScheduleDayStatusChange($event.checked, opt)"> {{opt.value}}</mat-checkbox> -->
                                                    </div>
                                                </section>
                                                <div class="row px-0">
                                                    <div class="col-6 px-0">
                                                        <label class="mb-3">Start time</label>
                                                        <mat-form-field class="example-full-width mb-3 p-0" appearance="outline">
                                                            <mat-label>Choose a time</mat-label>
                                                            <input matInput [owlDateTimeTrigger]="weekly_start_time" [owlDateTime]="weekly_start_time" formControlName="weekly_start_time" (dateTimeChange)="onWeeklyRunScheduleStartTimeChange($event)">
                                                            <mat-icon matSuffix [owlDateTimeTrigger]="weekly_start_time" class="date-icon">schedule</mat-icon>
                                                            <owl-date-time [pickerType]="'timer'" #weekly_start_time></owl-date-time>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                            </div> 
                                            <div *ngSwitchCase="4" class="row">
                                                <h5 class="px-0">Monthly schedule</h5>
                                                <div class="row px-0">
                                                    <label class="px-0">Months:</label>
                                                    <div class="p-0">
                                                        <mat-checkbox *ngFor="let opt of monthsOfYearItems;" [value]="opt.key.toString()" [checked]="true" class="mb-2" (change)="onMonthlyScheduleMonthStatusChange($event.checked, opt)">{{opt.value}}
                                                        </mat-checkbox>
                                                    </div>
                                                </div>
                                                <div class="row pt-3 px-0">
                                                    <mat-radio-group class="vertical-radio-group px-0" formControlName="monthly_schedule_type" (change)="onMonthlyScheduleTypeChange($event)">
                                                        <mat-radio-button [value]="1">On week of month:</mat-radio-button>
                                                        <div style="margin-left: 2.8rem;" class="mb-3">
                                                            <mat-form-field appearance="outline">
                                                                <mat-select [disabled]="model.schedule.monthlySchedule.monthlyScheduleType != 1" (selectionChange)="onMonthlyScheduleWeekOfMonthChange($event)">
                                                                    <mat-option *ngFor="let opt of weekOfMonthItems;" [value]="opt.key.toString()">{{opt.value}}</mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                            <div class="mt-0">
                                                                <div class="row">
                                                                    <label class="px-0">On days of week:</label>
                                                                </div>
                                                                <mat-checkbox *ngFor="let opt of daysOfWeekItems;" [value]="opt.key.toString()" [checked]="true" class="mb-2" [disabled]="model.schedule.monthlySchedule.monthlyScheduleType != 1"
                                                                    (change)="onMonthlyScheduleOnDayOfWeekChange($event.checked, opt)">{{opt.value}}
                                                                </mat-checkbox>
                                                            </div>
                                                        </div>
                                                        <mat-radio-button [value]="2" class="mb-3">
                                                            <div class="row d-flex align-items-center">
                                                                <div class="col col-auto ms-0 ps-0">
                                                                    <label class="mt-0">On calendar day(s):</label>
                                                                </div>
                                                                <div class="col col-auto input custom-input">
                                                                    <mat-form-field class="example-full-width" appearance="outline">
                                                                        <input type="text" class="form-control" formControlName="monthly_calendar_days" matInput [disabled]="model.schedule.monthlySchedule.monthlyScheduleType != 2" (change)="onMonthlyScheduleOnCalendarDaysChange($event)">
                                                                    </mat-form-field>
                                                                </div>
                                                            </div>
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                                <div class="row px-0">
                                                    <div class="col-6 px-0">
                                                        <label class="mb-3">Start time</label>
                                                        <mat-form-field class="example-full-width mb-3 p-0" appearance="outline">
                                                            <mat-label>Choose a time</mat-label>
                                                            <input matInput [owlDateTimeTrigger]="monthly_start_time" [owlDateTime]="monthly_start_time" formControlName="monthly_start_time" (dateTimeChange)="onMonthlyRunScheduleStartTimeChange($event)">
                                                            <mat-icon matSuffix [owlDateTimeTrigger]="monthly_start_time" class="date-icon">schedule</mat-icon>
                                                            <owl-date-time [pickerType]="'timer'" #monthly_start_time></owl-date-time>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngSwitchCase="5" class="row">
                                                <h5 class="p-0">Once-time schedule</h5>
                                                <div class="row px-0">
                                                    <div class="col-6 px-0">
                                                        <label class="mb-3">Start time</label>
                                                        <mat-form-field class="example-full-width mb-3 p-0" appearance="outline">
                                                            <mat-label>Choose a time</mat-label>
                                                            <input matInput [owlDateTimeTrigger]="onetime_start_time" [owlDateTime]="onetime_start_time" formControlName="onetime_start_time" (dateTimeChange)="onOneTimeRunScheduleStartTimeChange($event)">
                                                            <mat-icon matSuffix [owlDateTimeTrigger]="onetime_start_time" class="date-icon">schedule</mat-icon>
                                                            <owl-date-time [pickerType]="'timer'" #onetime_start_time></owl-date-time>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-2">
                                        <div class="row px-0">
                                            <div class="col p-0">
                                                <h5 class="mt-4 p-0">Start and end dates</h5>
                                                <div class="col col-6">
                                                    <label class="mb-3">Begin running this schedule on:</label>
                                                    <mat-form-field class="example-full-width" appearance="outline">
                                                        <input matInput [matDatepicker]="hourly_picker_start" formControlName="hourly_start_date" (dateChange)="onStartDateChange($event)" />
                                                        <mat-hint>YYYY/MM/DD</mat-hint>
                                                        <mat-datepicker-toggle matIconSuffix [for]="hourly_picker_start"></mat-datepicker-toggle>
                                                        <mat-datepicker #hourly_picker_start></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col col-6">
                                                    <mat-checkbox value="1" [disabled]="false" class="mt-4" appearance="outline" (change)="onHourlyRunScheduleIsEnabledStopTimeChange($event.checked)">Stop this schedule on:</mat-checkbox>
                                                    <mat-form-field class="example-full-width mt-0" appearance="outline">
                                                        <!-- formControlName="hourly_end_date" -->
                                                        <input matInput [matDatepicker]="hourly_picker_end" formControlName="stop_date" (dateChange)="onStopDateChange($event)" />
                                                        <mat-hint>YYYY/MM/DD</mat-hint>
                                                        <mat-datepicker-toggle matIconSuffix [for]="hourly_picker_end"></mat-datepicker-toggle>
                                                        <mat-datepicker #hourly_picker_end></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            @if (error) {
                            <div class="alert alert-danger mt-3 mb-0">{{error}}</div>
                            }
                            <div class="me-4 text-end">
                                <button mat-button color="accent" class="btn" type="button" (click)="onCancel()" style="border-radius: 5px;">Cancel</button>
                                <button mat-flat-button color="accent" [class.auth-spinner]="loading" [disabled]="loading" class="btn ms-2" type="submit" style="border-radius: 5px;">Submit</button>
                            </div>
                        </form>

                        <div *ngIf="isReadOnly == true" class="readonly">
                            <div class="row mb-5">
                                <div class="col col-5 border rounded p-4">
                                    <div class="mb-3 input">
                                        <div class="row">
                                            <div class="col p-0">
                                                <label class="px-0">Report</label>
                                                <input type="text" readonly class="form-control" aria-label="Report" [value]="model.report.path">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col  p-0 mb-2">
                                                <label class="px-0">Description</label>
                                                <input type="text" readonly class="form-control" [value]="model.description">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col p-0 mb-2">
                                                <label class="px-0">Owner</label>
                                                <input type="text" readonly class="form-control" [value]="model.report.owner">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3 input">
                                        <h5 class="p-0">Subscription type</h5>
                                        <div class="col p-0 mb-5">
                                            <input type="radio" [checked]="model.subscriptionType == 0" disabled value="0"><label>Standard subscription</label>
                                            <input type="radio" [checked]="model.subscriptionType == 1" disabled value="1"><label>Data-driven subscription</label>
                                        </div>
                                    </div>
                                    <div class="mb-3 input">
                                        <h5 class="p-0">Destination</h5>
                                        <div class="col p-0">
                                            <input type="text" class="form-control" value="Email" readonly>
                                        </div>
                                    </div>
                                    <div class="input">
                                        <h5 class="p-0">Delivery options (Email)</h5>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <label class="px-0">To</label>
                                                <input type="email" readonly class="form-control" [value]="model.deliveryOption.emailDeliveryOption.to">
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <label class="px-0">Cc</label>
                                                <input type="email" readonly class="form-control" [value]="model.deliveryOption.emailDeliveryOption.cc">
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <label class="px-0">Bcc</label>
                                                <input type="email" readonly class="form-control" [value]="model.deliveryOption.emailDeliveryOption.bcc">
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <label class="px-0">Reply To</label>
                                                <input type="email" readonly class="form-control" [value]="model.deliveryOption.emailDeliveryOption.replyTo">
                                            </div>
                                        </div>
                                        <div>
                                            <div class="col p-0 mb-2">
                                                <label class="px-0">Subject</label>
                                                <input type="email" readonly class="form-control" [value]="model.deliveryOption.emailDeliveryOption.subject">
                                            </div>
                                        </div>
                                        <div class="input mb-3">
                                            <div class="row">
                                                <div class="col p-0">
                                                    <input type="checkbox" disabled value="1" [checked]="model.deliveryOption.emailDeliveryOption.includeReport"><label>Include Report</label>
                                                    <input type="checkbox" disabled value="2" [checked]="model.deliveryOption.emailDeliveryOption.includeLink"><label>Include Link</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="input row">
                                            <div class="col-12 p-0 mb-2">
                                                <label class="px-0">Render Format</label>
                                                <input type="text" readonly class="form-control" [value]="renderFormatItems[model.deliveryOption.emailDeliveryOption.renderFormat].value">
                                            </div>
                                            <div class="col-12 p-0">
                                                <label class="px-0">Priority</label>
                                                <input type="text" readonly class="form-control" [value]="priorityItems[model.deliveryOption.emailDeliveryOption.priority].value">
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="col">
                                            <label class="px-0">Comment</label>
                                            <textarea class="form-control" [value]="model.deliveryOption.emailDeliveryOption.comment"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="col col-auto"></div>

                                <div class="col col-6 border rounded p-4">
                                    <div class="row">
                                        <h5 class="p-0">Schedule details</h5>
                                        <div class="col p-0 mb-5 d-flex align-items-center text-left">
                                            <input type="radio" disabled value="0" [checked]="model.scheduleType == 0"><label>Shared schedule</label>
                                            <input type="radio" disabled [checked]="model.scheduleType == 1" value="1" class="px-0"><label>Report-specific schedule</label>
                                        </div>
                                    </div>
                                    <hr class="my-2">
                                    <div *ngIf="model.scheduleType == 1" class="row">
                                        <div class="col p-0 mb-5">
                                            <div *ngFor="let opt of scheduleTypeItems; index as i" class="float-start  d-flex align-items-center">
                                                <input type="radio" disabled [value]="opt.key" [checked]="model.scheduleType == +opt.key">
                                                <label class="me-4 ps-1">{{opt.value}}</label>
                                            </div>
                                        </div>
                                        <div [ngSwitch]="model.scheduleDetailType" class="mt-4 p-0">
                                            <div *ngSwitchCase="1" class="row">
                                                <div class="col p-0">
                                                    <h5>Hourly schedule</h5>
                                                    <div class="row">
                                                        <div class="row px-0">
                                                            <div class="col-6 px-0">
                                                                <label class="mb-3 p-0">Run the schedule every:</label>
                                                                <div class="row d-flex align-items-center mb-4 px-0">
                                                                    <div class="col col-4 px-0">
                                                                        <input type="text" class="form-control`" disabled [value]="model.schedule.hourlySchedule.hours">
                                                                    </div>
                                                                    <div class="col col-1">
                                                                        :
                                                                    </div>
                                                                    <div class="col col-4 px-0">
                                                                        <input type="text" class="form-control" disabled [value]="model.schedule.hourlySchedule.minutes">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row px-0">
                                                            <div class="col-6 px-0">
                                                                <label class="mb-3">Start time</label>
                                                                <br>
                                                                <label class="px-0">Choose a time</label>
                                                                <br>
                                                                <input type="text" class="form-control" [value]="getFormattedTime(model.schedule.hourlySchedule.startDateTime)">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngSwitchCase="2" class="row">
                                                <h5 class="px-0">Daily schedule</h5>
                                                <div class="row px-0">
                                                    <div class="col px-0">
                                                        <input type="radio" disabled checked value="1"><label>On the following days:</label>
                                                        <br>
                                                        <section class="example-section d-flex" style="margin-left: 2rem; flex: 1;">
                                                            <div *ngFor="let opt of daysOfWeekItems; index as i;" class="float-start">
                                                                <input type="checkbox" disabled [value]="opt.key" [checked]="isKeySelected(opt.value, model.schedule.dailySchedule.selectedDays)">
                                                                <label class="ps-1 pe-3">{{opt.value}}</label>
                                                                <br>
                                                            </div>
                                                        </section>
                                                        <input type="radio" disabled value="2"><label>Every weekday</label>
                                                        <br>
                                                        <input type="radio" disabled value="3"><label>Repeat after this number of days:</label>
                                                        <br>
                                                        <input type="number" class="form-control mt-1" disabled [value]="getNumberInDigits(model.schedule.dailySchedule.repeatAfterDaysCount, 2)">
                                                    </div>
                                                </div>
                                                <div class="row px-0 mt-4">
                                                    <div class="row px-0">
                                                        <div class="col-6 px-0">
                                                            <label class="mb-3">Start time</label>
                                                            <br>
                                                            <label>Choose a time</label>
                                                            <br>
                                                            <input type="text" [value]="getFormattedTime(model.schedule.dailySchedule.startDateTime)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngSwitchCase="3">
                                                <h5 class="px-0">Weekly schedule</h5>
                                                <div class="row px-0">
                                                    <label class="mb-3 px-0">Repeat after this number of days:</label>
                                                    <div class="col px-0 input">
                                                        <input type="number" class="form-control" disabled [value]="getNumberInDigits(model.schedule.weeklySchedule.repeatAfterDaysCount, 2)">
                                                    </div>
                                                </div>
                                                <section class="example-section d-flex" style="margin-left: 2rem; flex: 1;">
                                                    <div *ngFor="let opt of daysOfWeekItems;" class="float-start">
                                                        <input type="checkbox" disabled [value]="opt.key" [checked]="isKeySelected(opt.value, model.schedule.weeklySchedule.selectedDays)">
                                                        <label class="ps-1 pe-3">{{opt.value}}</label>
                                                        <br>
                                                    </div>
                                                </section>
                                                <div class="row px-0 mt-4">
                                                    <div class="row px-0">
                                                        <div class="col-6 px-0">
                                                            <label class="mb-3">Start time</label>
                                                            <br>
                                                            <label>Choose a time</label>
                                                            <br>
                                                            <input type="text" [value]="getFormattedTime(model.schedule.weeklySchedule.startDateTime)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngSwitchCase="4" class="row">
                                                <h5 class="px-0">Monthly schedule</h5>
                                                <div class="row px-0">
                                                    <label class="px-0">Months:</label>
                                                    <div class="p-0">
                                                        <section class="example-section d-flex" style="margin-left: 2rem; flex: 1;">
                                                            <div *ngFor="let opt of monthsOfYearItems;" class="float-start">
                                                                <input type="checkbox" disabled [value]="opt.key" [checked]="isKeySelected(opt.value, model.schedule.monthlySchedule.selectedMonths)">
                                                                <label class="ps-1 pe-3">{{opt.value}}</label>
                                                                <br>
                                                            </div>
                                                        </section>
                                                    </div>
                                                </div>
                                                <div class="row pt-3 px-0">
                                                    <input type="radio" disabled value="1"><label>On week of month:</label>
                                                    <br>
                                                    <input type="text" class="form-control" [value]="weekOfMonthItems[model.schedule.monthlySchedule.onWeekOfMonth]">
                                                    <div class="mt-0">
                                                        <div class="row">
                                                            <label class="px-0">On days of week:</label>
                                                        </div>
                                                        <section class="example-section d-flex" style="margin-left: 2rem; flex: 1;">
                                                            <div *ngFor="let opt of daysOfWeekItems;" class="float-start">
                                                                <input type="checkbox" disabled [value]="opt.key" [checked]="isKeySelected(opt.value, model.schedule.monthlySchedule.onDaysOfWeek)">
                                                                <label class="ps-1 pe-3">{{opt.value}}</label>
                                                                <br>
                                                            </div>
                                                        </section>
                                                    </div>
                                                    <input type="radio" disabled value="2"><label>On calendar day(s):</label>
                                                    <br>
                                                    <input type="text" class="form-control" disabled [value]="model.schedule.monthlySchedule.onCalendarDays">
                                                </div>
                                                <div class="row px-0 mt-4">
                                                    <div class="row px-0">
                                                        <div class="col-6 px-0">
                                                            <label class="mb-3">Start time</label>
                                                            <br>
                                                            <label>Choose a time</label>
                                                            <br>
                                                            <input type="text" [value]="getFormattedTime(model.schedule.monthlySchedule.startDateTime)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngSwitchCase="5" class="row">
                                                <h5 class="p-0">Once-time schedule</h5>
                                                <div class="row px-0 mt-4">
                                                    <div class="row px-0">
                                                        <div class="col-6 px-0">
                                                            <label class="mb-3">Start time</label>
                                                            <br>
                                                            <label>Choose a time</label>
                                                            <br>
                                                            <input type="text" [value]="getFormattedTime(model.schedule.oneTimeSchedule.startDateTime)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="mt-4 mb-0">
                                        <div class="row px-0">
                                            <div class="col p-0">
                                                <h5 class="mt-4 p-0">Start and end dates</h5>
                                                <div class="col col-6">
                                                    <label class="mb-3 px-0">Begin running this schedule on:</label>
                                                    <input type="text" class="form-control" disabled [value]="getFormattedScheduleStartDate()">
                                                </div>
                                                <div class="col col-6">
                                                    <input type="checkbox" disabled [value]="1" [checked]="isScheduleEndDateSet()"><label>Stop this schedule on:</label>
                                                    <input type="text" class="form-control" disabled [value]="getFormattedScheduleEndDate()">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            @if (error) {
                            <div class="alert alert-danger mt-3 mb-0">{{error}}</div>
                            }
                            <div class="me-4 text-end">
                                <button mat-button color="accent" class="btn" type="button" style="border-radius: 5px;" (click)="goBack()">Go Back</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>